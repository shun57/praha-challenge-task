# サードパーティクッキーについて理解する

## 課題１（質問）

### サードパーティクッキーとファーストパーティクッキー

- ファーストパーティクッキー
Cookieのドメインとスキームが現在のページと一致している場合、そのCookieは同じサイトのものとみなされ、ファーストパーティクッキーと呼ばれる。
要は訪問しているWebサイトのドメイン（ホスト）から直接発行されるクッキーのこと

- サードパーティクッキー
ドメインとスキームが異なる場合、Cookieは同じサイトのものとはみなされず、サードパーティクッキーと呼ばれる。
要は「ユーザーが訪問しているWebサイトとは、異なるドメイン（ホスト）」から発行されるクッキーのこと

### ユーザの訪問履歴を把握

あるサイトにアクセスした際に、ページに他のドメイン(広告配信ネットワーク)のスクリプトが埋め込まれている。訪問時にスクリプトが実行、広告配信ネットワークサーバに送られ、サードパーティクッキーが発行される。複数のサイトにアクセスした際にも、同じブラウザから送信されたサードパーティクッキーに基づいて閲覧履歴などのプロファイルを構築する。

### サードパーティークッキーの生成

- スクリプトの埋め込み
- 画像の埋め込み
- iframeの利用
- ウェブフォントの利用
- CSS

### サードパーティクッキー ブラウザ

- Chrome
2024年末までに使用停止予定
- Safari
デフォルトでブロックする
- FireFox
デフォルトでブロックする

### hoge.com:8080とhoge.com:8081のクッキーは？

- ファーストパーティクッキー
ドメインが同じため

### 参考

https://cookie-script.com/all-you-need-to-know-about-third-party-cookies.html

https://www.techtarget.com/whatis/definition/third-party-cookie

https://developer.mozilla.org/ja/docs/Web/HTTP/Cookies

## 課題2 実装

https://github.com/shun57/express-task/pull/1

### 参考

https://blog.jxck.io/entries/2021-04-21/public-suffix-list.html