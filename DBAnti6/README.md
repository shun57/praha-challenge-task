# データベース設計のアンチパターンを学ぶ6

[課題内容](https://airtable.com/appPxhCPFYGqqN9YU/tblVlFr2q4lIqDKYc/viwX8r6DpCRp80swL/recsfBWDXsaFjYqjW?blocks=hide)

## 課題1

- 前提：check制約は追加や削除がないため、毎回再定義となる
- このケースではなさそうだが、後からcheck制約を追加したいとなった際に、違反している既存データがあったら対応が難しくなる
- 例えば「停学中を消して、休学中を追加」など、制約の値を変更したくなった場合に、既存のデータで停学中があった場合に変更や削除の必要があり大変になる
- ほぼ考えられないがDB移植が困難（MySQLは8からcheckが使えるようになった）

## 課題2

[ダイアグラム](https://dbdiagram.io/d/61bec6353205b45b73c3fa2a)


## 課題3

- 社内の人事管理システムにおいて、社員の役職をroleで定義する。そのroleカラムに役職をcheck制約で入れた場合に発生する。

## 参照情報

[SQLアンチパターン　サーティワンフレーバー](https://qiita.com/fktnkit/items/ada64c6581b676d250bb)

## 気になること

- 実務でcheck制約を使っているパターンを見たことがない。どういう時に使うか？
例えば、、、「フラグを作って0,1だけ許容する」「金額カラムで0以上」「正規表現でメールアドレス形式」「アルファベットのみ」などができるが、これはアプリ側で(も)やるべき？